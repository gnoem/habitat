datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id            String        @default(cuid()) @id
  name          String?
  email         String        @unique
  password      String?
  habits        Habit[]
  entries       Entry[]
  settings      Settings?
  demo          Boolean       @default(false)
  @@map(name: "users")
}

model Settings {
  id                               String           @default(cuid()) @id
  dashboard__defaultView           String?
  habits__defaultView              String?
  appearance__showClock            Boolean?
  appearance__24hrClock            Boolean?
  appearance__showClockSeconds     Boolean?
  user                             User?            @relation(fields: [userId], references: [id])
  userId                           String?          @unique
  @@map(name: "settings")
}

model Habit {
  id            String        @default(cuid()) @id
  name          String
  icon          String?
  color         String?
  label         String?
  complex       Boolean?
  retired       Boolean       @default(false)
  records       Record[]
  user          User?         @relation(fields: [userId], references: [id])
  userId        String?
  demo          Boolean       @default(false)
  @@map(name: "habits")
}

model Entry {
  id            String        @default(cuid()) @id
  date          String
  records       Record[]
  user          User          @relation(fields: [userId], references: [id])
  userId        String
  demo          Boolean       @default(false)
  @@map(name: "entries")
}

model Record {
  id            String        @default(cuid()) @id
  habit         Habit?        @relation(fields: [habitId], references: [id])
  habitId       String?
  amount        Int?
  check         Boolean
  entry         Entry?        @relation(fields: [entryId], references: [id])
  entryId       String?
  demo          Boolean       @default(false)
  @@map(name: "records")
}
